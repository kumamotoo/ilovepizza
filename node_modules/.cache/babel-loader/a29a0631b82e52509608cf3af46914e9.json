{"ast":null,"code":"import React,{useCallback,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Categories,SortPopup,PizzaBlock,PizzaLoadingBlock}from\"../components\";import{setCategory,setSortBy}from\"../redux/actions/filters\";import{fetchPizzas}from\"../redux/actions/pizzas\";import{addPizzaToCart}from\"../redux/actions/cart\";var categoryNames=[\"Meat\",\"Vegetarian\",\"Grill\",\"Spicy\"];var sortIems=[{name:\"popularity\",type:\"popular\",order:\"desc\"},{name:\"price\",type:\"price\",order:\"desc\"},{name:\"name\",type:\"name\",order:\"asc\"}];function Home(){var dispatch=useDispatch();var items=useSelector(function(_ref){var pizzas=_ref.pizzas;return pizzas.items;});var cartItems=useSelector(function(_ref2){var cart=_ref2.cart;return cart.items;});var isLoaded=useSelector(function(_ref3){var pizzas=_ref3.pizzas;return pizzas.isLoaded;});var _useSelector=useSelector(function(_ref4){var filters=_ref4.filters;return filters;}),category=_useSelector.category,sortBy=_useSelector.sortBy;useEffect(function(){dispatch(fetchPizzas(sortBy,category));},[category,sortBy]);var onSelectCategory=useCallback(function(index){dispatch(setCategory(index));},[]);var onSelectSortType=useCallback(function(type){dispatch(setSortBy(type));},[]);var handleAddPizzaToCart=function handleAddPizzaToCart(obj){dispatch({type:\"ADD_PIZZA_CART\",payload:obj});};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content__top\"},/*#__PURE__*/React.createElement(Categories,{activeCategory:category,onClickCategory:onSelectCategory,items:categoryNames}),/*#__PURE__*/React.createElement(SortPopup,{activeSortType:sortBy.type,items:sortIems,onClickSortType:onSelectSortType})),/*#__PURE__*/React.createElement(\"h2\",{className:\"content__title\"},\"All pizza\"),/*#__PURE__*/React.createElement(\"div\",{className:\"content__items\"},isLoaded?items.map(function(obj){return/*#__PURE__*/React.createElement(PizzaBlock,Object.assign({onClickAddPizza:handleAddPizzaToCart,key:obj.id,addedCount:cartItems[obj.id]&&cartItems[obj.id].items.length},obj));}):Array(12).fill(0).map(function(_,index){return/*#__PURE__*/React.createElement(PizzaLoadingBlock,{key:index});})));}export default Home;","map":{"version":3,"sources":["/home/sofia/pet-projects/react-pizza/src/pages/Home.jsx"],"names":["React","useCallback","useEffect","useSelector","useDispatch","Categories","SortPopup","PizzaBlock","PizzaLoadingBlock","setCategory","setSortBy","fetchPizzas","addPizzaToCart","categoryNames","sortIems","name","type","order","Home","dispatch","items","pizzas","cartItems","cart","isLoaded","filters","category","sortBy","onSelectCategory","index","onSelectSortType","handleAddPizzaToCart","obj","payload","map","id","length","Array","fill","_"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\n\nimport {\n  Categories,\n  SortPopup,\n  PizzaBlock,\n  PizzaLoadingBlock,\n} from \"../components\";\n\nimport { setCategory, setSortBy } from \"../redux/actions/filters\";\nimport { fetchPizzas } from \"../redux/actions/pizzas\";\nimport { addPizzaToCart } from \"../redux/actions/cart\";\n\nconst categoryNames = [\"Meat\", \"Vegetarian\", \"Grill\", \"Spicy\"];\nconst sortIems = [\n  { name: \"popularity\", type: \"popular\", order: \"desc\" },\n  { name: \"price\", type: \"price\", order: \"desc\" },\n  { name: \"name\", type: \"name\", order: \"asc\" },\n];\n\nfunction Home() {\n  const dispatch = useDispatch();\n  const items = useSelector(({ pizzas }) => pizzas.items);\n  const cartItems = useSelector(({ cart }) => cart.items);\n  const isLoaded = useSelector(({ pizzas }) => pizzas.isLoaded);\n  const { category, sortBy } = useSelector(({ filters }) => filters);\n\n  useEffect(() => {\n    dispatch(fetchPizzas(sortBy, category));\n  }, [category, sortBy]);\n\n  const onSelectCategory = useCallback((index) => {\n    dispatch(setCategory(index));\n  }, []);\n\n  const onSelectSortType = useCallback((type) => {\n    dispatch(setSortBy(type));\n  }, []);\n\n  const handleAddPizzaToCart = (obj) => {\n    dispatch({\n      type: \"ADD_PIZZA_CART\",\n      payload: obj,\n    });\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"content__top\">\n        <Categories\n          activeCategory={category}\n          onClickCategory={onSelectCategory}\n          items={categoryNames}\n        />\n        <SortPopup\n          activeSortType={sortBy.type}\n          items={sortIems}\n          onClickSortType={onSelectSortType}\n        />\n      </div>\n      <h2 className=\"content__title\">All pizza</h2>\n      <div className=\"content__items\">\n        {isLoaded\n          ? items.map((obj) => (\n              <PizzaBlock\n                onClickAddPizza={handleAddPizzaToCart}\n                key={obj.id}\n                addedCount={cartItems[obj.id] && cartItems[obj.id].items.length}\n                {...obj}\n              />\n            ))\n          : Array(12)\n              .fill(0)\n              .map((_, index) => <PizzaLoadingBlock key={index} />)}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}