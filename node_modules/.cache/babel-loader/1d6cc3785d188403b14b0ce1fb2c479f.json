{"ast":null,"code":"import _defineProperty from\"/home/sofia/pet-projects/react-pizza/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/sofia/pet-projects/react-pizza/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/sofia/pet-projects/react-pizza/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _toArray from\"/home/sofia/pet-projects/react-pizza/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toArray\";var initialState={items:{},totalPrice:0,totalCount:0};var getTotalPrice=function getTotalPrice(arr){return arr.reduce(function(sum,obj){return obj.price+sum;},0);};var _get=function _get(obj,path){var _path$split=path.split('.'),_path$split2=_toArray(_path$split),firstKey=_path$split2[0],keys=_path$split2.slice(1);return keys.reduce(function(val,key){return val[key];},obj[firstKey]);};var getTotalSum=function getTotalSum(obj,path){return Object.values(obj).reduce(function(sum,obj){var value=_get(obj,path);return sum+value;},0);};var cart=function cart(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case'ADD_PIZZA_CART':{var currentPizzaItems=!state.items[action.payload.id]?[action.payload]:[].concat(_toConsumableArray(state.items[action.payload.id].items),[action.payload]);var newItems=_objectSpread(_objectSpread({},state.items),{},_defineProperty({},action.payload.id,{items:currentPizzaItems,totalPrice:getTotalPrice(currentPizzaItems)}));var totalCount=getTotalSum(newItems,'items.length');var totalPrice=getTotalSum(newItems,'totalPrice');return _objectSpread(_objectSpread({},state),{},{items:newItems,totalCount:totalCount,totalPrice:totalPrice});}case'REMOVE_CART_ITEM':{var _newItems=_objectSpread({},state.items);var currentTotalPrice=_newItems[action.payload].totalPrice;var currentTotalCount=_newItems[action.payload].items.length;delete _newItems[action.payload];return _objectSpread(_objectSpread({},state),{},{items:_newItems,totalPrice:state.totalPrice-currentTotalPrice,totalCount:state.totalCount-currentTotalCount});}case'PLUS_CART_ITEM':{var newObjItems=[].concat(_toConsumableArray(state.items[action.payload].items),[state.items[action.payload].items[0]]);var _newItems2=_objectSpread(_objectSpread({},state.items),{},_defineProperty({},action.payload,{items:newObjItems,totalPrice:getTotalPrice(newObjItems)}));var _totalCount=getTotalSum(_newItems2,'items.length');var _totalPrice=getTotalSum(_newItems2,'totalPrice');return _objectSpread(_objectSpread({},state),{},{items:_newItems2,totalCount:_totalCount,totalPrice:_totalPrice});}case'MINUS_CART_ITEM':{var oldItems=state.items[action.payload].items;var _newObjItems=oldItems.length>1?state.items[action.payload].items.slice(1):oldItems;var _newItems3=_objectSpread(_objectSpread({},state.items),{},_defineProperty({},action.payload,{items:_newObjItems,totalPrice:getTotalPrice(_newObjItems)}));var _totalCount2=getTotalSum(_newItems3,'items.length');var _totalPrice2=getTotalSum(_newItems3,'totalPrice');return _objectSpread(_objectSpread({},state),{},{items:_newItems3,totalCount:_totalCount2,totalPrice:_totalPrice2});}case'CLEAR_CART':return{totalPrice:0,totalCount:0,items:{}};default:return state;}};export default cart;","map":{"version":3,"sources":["/home/sofia/pet-projects/react-pizza/src/redux/reducers/cart.js"],"names":["initialState","items","totalPrice","totalCount","getTotalPrice","arr","reduce","sum","obj","price","_get","path","split","firstKey","keys","val","key","getTotalSum","Object","values","value","cart","state","action","type","currentPizzaItems","payload","id","newItems","currentTotalPrice","currentTotalCount","length","newObjItems","oldItems","slice"],"mappings":"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","sourcesContent":["const initialState = {\n  items: {},\n  totalPrice: 0,\n  totalCount: 0,\n};\n\nconst getTotalPrice = (arr) => arr.reduce((sum, obj) => obj.price + sum, 0);\n\nconst _get = (obj, path) => {\n  const [firstKey, ...keys] = path.split('.');\n  return keys.reduce((val, key) => {\n    return val[key];\n  }, obj[firstKey]);\n};\n\nconst getTotalSum = (obj, path) => {\n  return Object.values(obj).reduce((sum, obj) => {\n    const value = _get(obj, path);\n    return sum + value;\n  }, 0);\n};\n\nconst cart = (state = initialState, action) => {\n  switch (action.type) {\n    case 'ADD_PIZZA_CART': {\n      const currentPizzaItems = !state.items[action.payload.id]\n        ? [action.payload]\n        : [...state.items[action.payload.id].items, action.payload];\n\n      const newItems = {\n        ...state.items,\n        [action.payload.id]: {\n          items: currentPizzaItems,\n          totalPrice: getTotalPrice(currentPizzaItems),\n        },\n      };\n\n      const totalCount = getTotalSum(newItems, 'items.length');\n      const totalPrice = getTotalSum(newItems, 'totalPrice');\n\n      return {\n        ...state,\n        items: newItems,\n        totalCount,\n        totalPrice,\n      };\n    }\n\n    case 'REMOVE_CART_ITEM': {\n      const newItems = {\n        ...state.items,\n      };\n      const currentTotalPrice = newItems[action.payload].totalPrice;\n      const currentTotalCount = newItems[action.payload].items.length;\n      delete newItems[action.payload];\n      return {\n        ...state,\n        items: newItems,\n        totalPrice: state.totalPrice - currentTotalPrice,\n        totalCount: state.totalCount - currentTotalCount,\n      };\n    }\n\n    case 'PLUS_CART_ITEM': {\n      const newObjItems = [\n        ...state.items[action.payload].items,\n        state.items[action.payload].items[0],\n      ];\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n\n      const totalCount = getTotalSum(newItems, 'items.length');\n      const totalPrice = getTotalSum(newItems, 'totalPrice');\n\n      return {\n        ...state,\n        items: newItems,\n        totalCount,\n        totalPrice,\n      };\n    }\n\n    case 'MINUS_CART_ITEM': {\n      const oldItems = state.items[action.payload].items;\n      const newObjItems =\n        oldItems.length > 1 ? state.items[action.payload].items.slice(1) : oldItems;\n      const newItems = {\n        ...state.items,\n        [action.payload]: {\n          items: newObjItems,\n          totalPrice: getTotalPrice(newObjItems),\n        },\n      };\n\n      const totalCount = getTotalSum(newItems, 'items.length');\n      const totalPrice = getTotalSum(newItems, 'totalPrice');\n\n      return {\n        ...state,\n        items: newItems,\n        totalCount,\n        totalPrice,\n      };\n    }\n\n    case 'CLEAR_CART':\n      return { totalPrice: 0, totalCount: 0, items: {} };\n\n    default:\n      return state;\n  }\n};\n\nexport default cart;\n"]},"metadata":{},"sourceType":"module"}