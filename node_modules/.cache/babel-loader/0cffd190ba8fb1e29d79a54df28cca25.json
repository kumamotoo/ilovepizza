{"ast":null,"code":"import React from'react';import{useSelector,useDispatch}from'react-redux';import{Categories,SortPopup,PizzaBlock,PizzaLoadingBlock}from'../components';import{setCategory,setSortBy}from'../redux/actions/filters';import{fetchPizzas}from'../redux/actions/pizzas';import{addPizzaToCart}from'../redux/actions/cart';var categoryNames=['Мясные','Вегетарианская','Гриль','Острые','Закрытые'];var sortIems=[{name:'популярности',type:'popular',order:'desc'},{name:'цене',type:'price',order:'desc'},{name:'алфавит',type:'name',order:'asc'}];function Home(){var dispatch=useDispatch();var items=useSelector(function(_ref){var pizzas=_ref.pizzas;return pizzas.items;});var cartItems=useSelector(function(_ref2){var cart=_ref2.cart;return cart.items;});var isLoaded=useSelector(function(_ref3){var pizzas=_ref3.pizzas;return pizzas.isLoaded;});var _useSelector=useSelector(function(_ref4){var filters=_ref4.filters;return filters;}),category=_useSelector.category,sortBy=_useSelector.sortBy;React.useEffect(function(){dispatch(fetchPizzas(sortBy,category));},[category,sortBy]);var onSelectCategory=React.useCallback(function(index){dispatch(setCategory(index));},[]);var onSelectSortType=React.useCallback(function(type){dispatch(setSortBy(type));},[]);var handleAddPizzaToCart=function handleAddPizzaToCart(obj){dispatch({type:'ADD_PIZZA_CART',payload:obj});};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"content__top\"},/*#__PURE__*/React.createElement(Categories,{activeCategory:category,onClickCategory:onSelectCategory,items:categoryNames}),/*#__PURE__*/React.createElement(SortPopup,{activeSortType:sortBy.type,items:sortIems,onClickSortType:onSelectSortType})),/*#__PURE__*/React.createElement(\"h2\",{className:\"content__title\"},\"\\u0412\\u0441\\u0435 \\u043F\\u0438\\u0446\\u0446\\u044B\"),/*#__PURE__*/React.createElement(\"div\",{className:\"content__items\"},isLoaded?items.map(function(obj){return/*#__PURE__*/React.createElement(PizzaBlock,Object.assign({onClickAddPizza:handleAddPizzaToCart,key:obj.id,addedCount:cartItems[obj.id]&&cartItems[obj.id].items.length},obj));}):Array(12).fill(0).map(function(_,index){return/*#__PURE__*/React.createElement(PizzaLoadingBlock,{key:index});})));}export default Home;","map":{"version":3,"sources":["/home/sofia/pet-projects/react-pizza/src/pages/Home.jsx"],"names":["React","useSelector","useDispatch","Categories","SortPopup","PizzaBlock","PizzaLoadingBlock","setCategory","setSortBy","fetchPizzas","addPizzaToCart","categoryNames","sortIems","name","type","order","Home","dispatch","items","pizzas","cartItems","cart","isLoaded","filters","category","sortBy","useEffect","onSelectCategory","useCallback","index","onSelectSortType","handleAddPizzaToCart","obj","payload","map","id","length","Array","fill","_"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { Categories, SortPopup, PizzaBlock, PizzaLoadingBlock } from '../components';\n\nimport { setCategory, setSortBy } from '../redux/actions/filters';\nimport { fetchPizzas } from '../redux/actions/pizzas';\nimport { addPizzaToCart } from '../redux/actions/cart';\n\nconst categoryNames = ['Мясные', 'Вегетарианская', 'Гриль', 'Острые', 'Закрытые'];\nconst sortIems = [\n  { name: 'популярности', type: 'popular', order: 'desc' },\n  { name: 'цене', type: 'price', order: 'desc' },\n  { name: 'алфавит', type: 'name', order: 'asc' },\n];\n\nfunction Home() {\n  const dispatch = useDispatch();\n  const items = useSelector(({ pizzas }) => pizzas.items);\n  const cartItems = useSelector(({ cart }) => cart.items);\n  const isLoaded = useSelector(({ pizzas }) => pizzas.isLoaded);\n  const { category, sortBy } = useSelector(({ filters }) => filters);\n\n  React.useEffect(() => {\n    dispatch(fetchPizzas(sortBy, category));\n  }, [category, sortBy]);\n\n  const onSelectCategory = React.useCallback((index) => {\n    dispatch(setCategory(index));\n  }, []);\n\n  const onSelectSortType = React.useCallback((type) => {\n    dispatch(setSortBy(type));\n  }, []);\n\n  const handleAddPizzaToCart = (obj) => {\n    dispatch({\n      type: 'ADD_PIZZA_CART',\n      payload: obj,\n    });\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"content__top\">\n        <Categories\n          activeCategory={category}\n          onClickCategory={onSelectCategory}\n          items={categoryNames}\n        />\n        <SortPopup\n          activeSortType={sortBy.type}\n          items={sortIems}\n          onClickSortType={onSelectSortType}\n        />\n      </div>\n      <h2 className=\"content__title\">Все пиццы</h2>\n      <div className=\"content__items\">\n        {isLoaded\n          ? items.map((obj) => (\n              <PizzaBlock\n                onClickAddPizza={handleAddPizzaToCart}\n                key={obj.id}\n                addedCount={cartItems[obj.id] && cartItems[obj.id].items.length}\n                {...obj}\n              />\n            ))\n          : Array(12)\n              .fill(0)\n              .map((_, index) => <PizzaLoadingBlock key={index} />)}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}